(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),l=n.n(c),o=n(6),u=n(3),i=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error",style:{color:"red",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginTop:10,marginBottom:10}},t)},m=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"message",style:{color:"green",background:"lightgray",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginTop:10,marginBottom:10}},t)},s=n(2),f=n.n(s),d=n(4),b=n(5),p=n.n(b),g="/api/people",v={getAll:function(){var e=Object(d.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.a.get(g),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.a.post(g,t),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(d.a)(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.a.put("".concat(g,"/").concat(t),n),e.next=3,a;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.a.delete("".concat(g,"/").concat(t)),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=e.values,n=e.deletePerson;return r.a.createElement("div",{className:"list-group"},r.a.createElement("li",{className:"list-group-item list-group-item-action"},t.name,r.a.createElement("span",{style:{margin:"5px"}}),t.number,r.a.createElement("button",{type:"button",className:"btn btn-warning",id:"listbtn",style:{marginLeft:"5px"},onClick:n},"delete")))},E=function(e){var t=e.rows;return r.a.createElement("div",{style:{lineHeight:0}},t)},N=function(e){var t=e.setNameToFind,n=e.nameToFind,a=e.handleFindNameChange;return r.a.createElement("form",{onChange:t},r.a.createElement("div",{align:"left"},r.a.createElement("label",{htmlFor:"filter"},"filter shown with:"),r.a.createElement("input",{id:"filter",type:"text",className:"form-control",value:n,onChange:a})))},w=function(e){var t=e.addPerson,n=e.newName,a=e.handleNameChange,c=e.newNumber,l=e.handleNumberChange,o=e.replaceNumber;return r.a.createElement("div",{className:"col-auto"},r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"name:"),r.a.createElement("input",{id:"name",type:"text",className:"form-control",value:n,onChange:a})),r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("label",{htmlFor:"number"},"number:"),r.a.createElement("input",{id:"number",type:"text",className:"form-control",value:c,onChange:l})),r.a.createElement("div",{align:"left",className:"form-group"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:o},"add"))))},y=function(){return r.a.createElement("div",{style:{color:"gray",fontStyle:"italic",fontSize:16}},r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("center",null,r.a.createElement("em",null,"Phonebook app, Full Stack Web Development"),r.a.createElement("br",null),r.a.createElement("em",null,"University of Helsinki 2020")))},j=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(""),s=Object(u.a)(l,2),f=s[0],d=s[1],b=Object(a.useState)(""),p=Object(u.a)(b,2),g=p[0],j=p[1],O=Object(a.useState)(!0),C=Object(u.a)(O,2),k=C[0],S=C[1],x=Object(a.useState)(""),T=Object(u.a)(x,2),F=T[0],P=T[1],A=Object(a.useState)(null),D=Object(u.a)(A,2),L=D[0],I=D[1],z=Object(a.useState)(null),B=Object(u.a)(z,2),H=B[0],J=B[1];Object(a.useEffect)((function(){v.getAll().then((function(e){console.log(e),c(e)}))}),[]);var R=k?Array.from(n):n.filter((function(e){return e.name.toLowerCase().includes(F.toLowerCase())})),U=function(e){var t=n.find((function(t){return t.name===e.name})),a=Object(o.a)(Object(o.a)({},t),{},{number:e.number}),r="".concat(t.name," is already added to\n      phonebook, replace the old number with a new one?");window.confirm(r)&&v.update(t.id,a).then((function(e){c(n.map((function(n){return n.name!==t.name?n:e}))),J("Changed phone number of ".concat(t.name)),setTimeout((function(){J(null)}),4e3)})).catch((function(e){I("Information of ".concat(t.name," has already been removed from server")),setTimeout((function(){I(null)}),4e3),c(n.filter((function(e){return e.id!==t.id})))}))},W=function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name,"?"))&&v.remove(e,t).then((function(){c(n.filter((function(t){return t.id!==e}))),J("Deleted ".concat(t.name)),setTimeout((function(){J(null)}),4e3)})).catch((function(e){I("Information of ".concat(t.name," has already been removed from server")),setTimeout((function(){I(null)}),4e3)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{id:"nav",className:"navbar navbar-light bg-light"},r.a.createElement("img",{src:"/logo.png",width:"50",height:"35",className:"d-inline-block align-top",alt:""}),r.a.createElement("strong",null,"Phonebook"),r.a.createElement("a",{role:"button",className:"btn btn-outline-primary",href:"/info"},"Info")),r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"col-auto"},r.a.createElement(N,{setNameToFind:function(e){e.preventDefault(),""!==F&&S(!1)},nameToFind:F,handleFindNameChange:function(e){P(e.target.value)}})),r.a.createElement(m,{message:H}),r.a.createElement(i,{message:L}),r.a.createElement("br",null),r.a.createElement("div",{className:"col-auto"},r.a.createElement("b",null,"Add new contact"),r.a.createElement(w,{addPerson:function(e){e.preventDefault();var t={name:f,number:g};n.map((function(e){return e.name.toLowerCase()})).includes(t.name.toLowerCase())?U(t):v.create(t).then((function(e){c(n.concat(e)),d(""),j(""),J("Added ".concat(t.name)),setTimeout((function(){J(null)}),4e3)})).catch((function(e){I(console.log(e.response.data)),setTimeout((function(){I(null)}),4e3)}))},newName:f,handleNameChange:function(e){d(e.target.value)},newNumber:g,handleNumberChange:function(e){j(e.target.value)}})),r.a.createElement("br",null),r.a.createElement("div",{className:"col-auto"},r.a.createElement("b",null,"Contacts"),r.a.createElement(E,{rows:R.map((function(e){return r.a.createElement(h,{key:e.name,values:e,deletePerson:function(){return W(e.id)},replaceNumber:function(){return U(e.name,e.number)}})}))})),r.a.createElement(y,null)))};n(40);l.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.225904e2.chunk.js.map